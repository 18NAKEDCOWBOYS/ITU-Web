{"version":3,"sources":["webpack:///./src/views/UserPage.vue?de00","webpack:///./src/views/UserPage.vue","webpack:///./src/views/UserPage.vue?4d9c","webpack:///./src/views/UserPage.vue?9f8a","webpack:///./src/views/UserPage.vue?a071"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","staticClass","_v","_s","user","name","userVM","escortEventsCountData","_e","weekDayCounts","monthsCounts","futureEvents","pastEvents","staticRenderFns","events","loaded","LoadData","userId","parseInt","$route","params","id","Promise","all","then","eventCount","length","customerCount","map","a","reduce","b","sortedEvents","sort","Date","startDate","getTime","firstEventDate","toLocaleDateString","lastEventDate","filter","escortCount","escortId","pilotCount","pilotId","labels","datasets","data","Stats","components","UserInfo","Events","BarGraph","component"],"mappings":"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","file":"js/about.5331d9bc.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-container',{attrs:{\"fluid\":\"\"}},[_c('h1',{staticClass:\"my-4\"},[_vm._v(_vm._s(_vm.user.name))]),_c('b-row',{staticClass:\"my-5\"},[_c('b-col',[_c('UserInfo',{staticClass:\"info\",attrs:{\"user\":_vm.userVM}})],1),_c('b-col',[_c('div',[_c('b-row',[_c('b-col',{attrs:{\"cols\":\"6\"}},[_c('h3',[_vm._v(\"Lety na pozici\")]),(_vm.loaded)?_c('BarGraph',{attrs:{\"data\":_vm.escortEventsCountData}}):_vm._e()],1),_c('b-col',{attrs:{\"cols\":\"6\"}},[_c('h3',[_vm._v(\"Lety ve dnech\")]),(_vm.loaded)?_c('BarGraph',{attrs:{\"data\":_vm.weekDayCounts}}):_vm._e()],1)],1),_c('b-row',[_c('b-col',{attrs:{\"cols\":\"6\"}},[_c('h3',[_vm._v(\"Lety v měsících\")]),(_vm.loaded)?_c('BarGraph',{attrs:{\"data\":_vm.monthsCounts}}):_vm._e()],1)],1)],1)])],1),_c('b-row',[_c('b-col',[_c('h2',[_vm._v(\"Nadcházející lety\")]),_c('Events',{staticClass:\"info\",attrs:{\"events\":_vm.futureEvents}})],1),_c('b-col',[_c('h2',[_vm._v(\"Proběhlé lety\")]),_c('Events',{staticClass:\"info\",attrs:{\"events\":_vm.pastEvents}})],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue, Watch } from \"vue-property-decorator\";\nimport { GetUser, User, Event, GetUserEvents } from \"../modules/ApiModel\";\nimport UserInfo from \"../components/UserInfo.vue\";\nimport Events from \"../components/Events.vue\";\nimport BarGraph from \"../components/BarGraph.vue\";\nimport * as Stats from \"../modules/Stats\";\n\n@Component({\n  components: {\n    UserInfo,\n    Events,\n    BarGraph,\n  },\n})\nexport default class UserPage extends Vue {\n  user: User = {} as User;\n  userVM: any = {};\n  events: Event[] = [];\n  loaded = false;\n\n  async created() {\n    this.LoadData();\n  }\n\n  @Watch(\"$route\")\n  async LoadData() {\n    const userId = parseInt(this.$route.params.id);\n    Promise.all([GetUser(userId), GetUserEvents(userId)]).then(\n      ([user, events]) => {\n        this.user = user;\n        this.events = events;\n        this.userVM = user;\n        this.userVM.eventCount = this.events.length;\n        this.userVM.customerCount = this.events\n          .map((a) => a.customerCount)\n          .reduce((a, b) => a + b);\n        const sortedEvents = this.events.sort(\n          (a, b) =>\n            new Date(a.startDate).getTime() - new Date(b.startDate).getTime(),\n        );\n        if (sortedEvents.length > 0) {\n          this.userVM.firstEventDate = new Date(\n            sortedEvents[0].startDate,\n          ).toLocaleDateString();\n          this.userVM.lastEventDate = new Date(\n            sortedEvents[sortedEvents.length - 1].startDate,\n          ).toLocaleDateString();\n        }\n        this.loaded = true;\n      },\n    );\n  }\n\n  get futureEvents(): Event[] {\n    return this.events.filter((a) => new Date(a.startDate) > new Date());\n  }\n  get pastEvents(): Event[] {\n    return this.events.filter((a) => new Date(a.startDate) < new Date());\n  }\n\n  get escortEventsCountData(): {} {\n    const escortCount = this.pastEvents.filter(\n      (a) => a.escortId == this.user.id,\n    ).length;\n    const pilotCount = this.pastEvents.filter((a) => a.pilotId == this.user.id)\n      .length;\n    return {\n      labels: [\"Jako doprovod\", \"Jako pilot\"],\n      datasets: [\n        {\n          data: [escortCount, pilotCount],\n        },\n      ],\n    };\n  }\n\n  get weekDayCounts(): {} {\n    return Stats.weekDayCounts(this.events);\n  }\n\n  get monthsCounts(): {} {\n    return Stats.monthsCounts(this.events);\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserPage.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserPage.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./UserPage.vue?vue&type=template&id=ad93ce38&scoped=true&\"\nimport script from \"./UserPage.vue?vue&type=script&lang=ts&\"\nexport * from \"./UserPage.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./UserPage.vue?vue&type=style&index=0&id=ad93ce38&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"ad93ce38\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserPage.vue?vue&type=style&index=0&id=ad93ce38&scoped=true&lang=css&\""],"sourceRoot":""}